<!doctype html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='ap-local-base-url' content='{{localBaseUrl}}' />
    <title>{{title}}</title>
    <link rel='stylesheet' href='/public/primer/build.css' media='all' />
    <link
      rel='stylesheet'
      href='/public/css/github-configuration.css'
      media='all'
    />
     <link
      rel="stylesheet"
      href="/public/css/global.css"
      media="all"
    />
    <script src='/public/js/jquery.min.js' nonce='{{nonce}}'></script>
  </head>

  <body class='px-3 py-6'>
    <input type='hidden' id='_csrf' name='_csrf' value='{{csrfToken}}' />
    <input type='hidden' id='jiraHost' name='jiraHost' value='{{jiraHost}}' />
    <input
      type='hidden'
      id='clientKey'
      name='clientKey'
      value='{{clientKey}}'
    />
    <section class='mx-auto' style='max-width: 570px'>
      <div class="headerImage">
        <img src='/public/assets/jira-and-github.png' alt="Jira and GitHub logos" />
      </div>
      </p>
      <h2 class='f2 text-center text-normal getConfiguration__header'>Connect a GitHub organization to your Jira site</h2>
      <p class='jiraInstance'>{{jiraHost}}</p>

      <div class='Box'>
        <div class='getConfiguration__wrapper'>
          <div class='tableHeader'>
            <p
              class='tableHeader__label org__cell'
            >GitHub Organization</p>
            <p class='tableHeader__label org__cell'>Repository
              access</p>
          </div>

          <div class="githubOrgs__table">
            {{#each installations}}
              <div class='Box-row clearfix '>
                {{!-- Organizations --}}
                <div class='getConfiguration__orgContent org__cell'>
                  <img
                    class='avatar float-left mr-2'
                    src='{{account.avatar_url}}'
                    alt='Github organization avatar'
                    height='25px'
                    width='25px'
                  />
                  <span class='text-bold text-gray-dark'><a
                      href='{{html_url}}'
                    >{{account.login}}</a></span>
                </div>

                {{!-- Repository access --}}
                <div class='getConfiguration__orgContent org__cell'>
                  <p class="getConfiguration__orgContent__repoSelection">{{repoAccessType repository_selection}}</p>
                  <p class="getConfiguration__orgContent__numberOfRepos">{{numberOfRepos}}</p>
                  {{#if admin}}
                    <a
                      href='/github/subscriptions/{{id}}'
                    >
                      <img
                        class="getConfiguration__orgContent_edit"
                        src='/public/assets/edit-icon.png'
                        alt='Editing icon'
                        height='25px'
                        width='25px'
                      />
                    </a>
                  {{/if}}
                </div>

                {{!-- Connect --}}
                <div class='getConfiguration__orgContent org__cell'>
                  {{#if admin}}
                    {{#if (isNotConnected syncStatus)}}
                      <button
                        class='install-link btn-info getConfiguration__orgContent__connectBtn'
                        data-installation-id='{{id}}'
                        type='submit'
                      >
                        {{connectedStatus syncStatus}}
                      </button>
                    {{else if (inProgressSync syncStatus)}}
                      <div class="getConfiguration__loaderContainer">
                        <div class="getConfiguration__loader"></div>
                      </div>
                    {{else}}
                      <p class="getConfiguration__orgContent__connectedMsg">
                        {{connectedStatus syncStatus}}
                      </p>
                    {{/if}}
                  {{/if}}
                </div>
              </div>
            {{/each}}
          </div>
        </div>
      </div>

      <p class='text-gray text-center my-4 getConfiguration__accountLink'>
        Don't see your account?
        <a href='{{info.html_url}}/installations/new'>Install {{info.name}}</a>
        on your user account or an Organization you own.
      </p>

      <p class='text-gray text-left my-4 getConfiguration__disclaimer'>
        <strong> Please note</strong>: We currently sync data from all
        repositories you've selected in the installation's settings. If there a
        large number of repositories in the installation, initial data sync will
        take some time to complete.
      </p>

      </div>

    </section>
    <script src='/public/js/github-configuration.js' nonce='{{nonce}}'></script>
  </body>

</html>
